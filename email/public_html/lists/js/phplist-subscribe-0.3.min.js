$(document).ready(function(){var e=new Image;e.src=waitImage;$("#phplistsubscribeform").submit(function(){var t=$("#emailaddress").val();var n=/^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;var r=this.action;var i=r.replace(/subscribe/,"asubscribe");$("#phplistsubscriberesult").html('<img src="'+e.src+'" width="'+e.width+'" height="'+e.height+'" border="0" alt="Please wait" title="powered by phpList, www.phplist.com" />');if(n.test(t)){var s=$.ajax({type:"POST",url:i,crossDomain:true,data:"email="+t,success:function(e,n,i){if(e.search(/FAIL/)>=0){document.location=r+"&email="+t}else{$("#phplistsubscriberesult").html("<div id='subscribemessage'></div>");$("#subscribemessage").html(e).hide().fadeIn(1500);$("#phplistsubscribeform").hide();$("#phplistnotsubscribe").hide();$("#continuesetup").show().fadeIn(2e3);document.cookie="phplistsubscribed=yes"}},error:function(e,n,i){document.location=r+"&email="+t}})}else{document.location=r+"&email="+t}return false});$("#emailaddress").val(pleaseEnter);$("#emailaddress").focus(function(){var e=$("#emailaddress").val();if(e==pleaseEnter){$("#emailaddress").val("")}});$("#emailaddress").blur(function(){var e=$("#emailaddress").val();if(e==""){$("#emailaddress").val(pleaseEnter)}});var t=document.cookie;if(t.indexOf("phplistsubscribed=yes")>=0){$("#phplistsubscribeform").html(thanksForSubscribing);$("#phplistnotsubscribe").hide();$("#continuesetup").show().fadeIn(2e3)}$("#phplistnotsubscribe").click(function(){$("#phplistsubscribeform").html("<h3>Not subscribed</h3>");$("#phplistnotsubscribe").hide();$("#continuesetup").show().fadeIn(2e3)})});$.ajaxTransport("+*",function(e,t,n){if(jQuery.browser.msie&&window.XDomainRequest){var r;return{send:function(t,n){r=new XDomainRequest;r.open("get",e.url+"&"+e.data);r.onload=function(){if(this.contentType.match(/\/xml/)){var e=new ActiveXObject("Microsoft.XMLDOM");e.async=false;e.loadXML(this.responseText);n(200,"success",[e])}else{n(200,"success",[this.responseText])}};r.ontimeout=function(){n(408,"error",["The request timed out."])};r.onerror=function(){n(404,"error",["The requested resource could not be found."])};r.send()},abort:function(){if(r)r.abort()}}}});if(pleaseEnter==undefined){var pleaseEnter="Please enter your email"}if(thanksForSubscribing==undefined){var thanksForSubscribing='<div class="subscribed">Thanks for subscribing. Please click the link in the confirmation email you will receive.</div>'}if(waitImage==undefined){var waitImage="https://s3.amazonaws.com/phplist/img/busy.gif"}
